(this["webpackJsonplight-transcoder-player"]=this["webpackJsonplight-transcoder-player"]||[]).push([[0],{12:function(e,t,n){e.exports={player:"style_player__19nHK"}},13:function(e,t,n){e.exports={player:"style_player__wFyAB"}},16:function(e,t,n){e.exports=n(24)},2:function(e,t,n){e.exports={home:"style_home__P0ecC",field:"style_field__3E_ai",message:"style_message__3qffF"}},24:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(6),s=n.n(o),c=n(4),l=n(7),i=n.n(l),u=n(2),d=n.n(u),p=n(8),f=n.n(p),m=function(){return r.a.createElement("div",{className:f.a.spinner},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null))},h=function(e){var t=e.onChange,n=void 0===t?function(){}:t,a=e.loading,o=void 0!==a&&a,s=e.value,c=void 0===s?"":s;return r.a.createElement("div",{className:d.a.home},r.a.createElement("input",{className:d.a.field,defaultValue:c,readOnly:o,placeholder:"https://mywebsite.com/myfile.mkv",onKeyDown:function(e){13===e.keyCode&&n(e.target.value)}}),r.a.createElement("div",{className:d.a.message},"(Default bitrate: 10Mbit/s)"),r.a.createElement("div",{className:d.a.message},"It's easy! Paste a media file link and press enter ;)"),o&&r.a.createElement(m,null))},y=n(9),v=n(10),g=n(14),_=n(11),b=n(15),E=n(3),w=n.n(E),j=n(12),O=n.n(j),S=function(e){function t(e){var n;return Object(y.a)(this,t),(n=Object(g.a)(this,Object(_.a)(t).call(this,e))).ref=r.a.createRef(),n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return r.a.createElement("video",{ref:this.ref,className:O.a.player,autoPlay:!0,width:"1920",height:"1080",controls:!0})}},{key:"componentDidMount",value:function(){if(w.a.polyfill.installAll(),w.a.Player.isBrowserSupported()){var e=new w.a.Player(this.ref.current);e.configure({streaming:{retryParameters:{timeout:1e4,maxAttempts:50,baseDelay:0,backoffFactor:0,fuzzFactor:0}}}),e.addEventListener("error",(function(e){console.error("Error code",e.detail.code,"object",e.detail)})),e.load(this.props.url).then((function(){console.log("The video has now been loaded!")})).catch((function(e){console.error("Error code",e.code,"object",e)})),window._player=e}else console.error("Browser not supported!")}}]),t}(r.a.Component),x=n(1),k=n.n(x),N="http://localhost:8585/",P=function(e){var t;return k.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=fetch("".concat(N,"media/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}).then((function(e){return e.json()})),n.abrupt("return",t);case 2:case"end":return n.stop()}}))},C=function(){var e,t,n,a,r,o=arguments;return k.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=o.length>0&&void 0!==o[0]?o[0]:"",t=o.length>1&&void 0!==o[1]?o[1]:0,n=o.length>2&&void 0!==o[2]?o[2]:0,a=o.length>3&&void 0!==o[3]?o[3]:[0],o.length>4&&void 0!==o[4]?o[4]:[],r=fetch("".concat(N,"session"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e,profile:t,video:n,audio:a[0],subtitle:"",protocol:"DASH",supported:[{type:"HLS",video:[{codec:"h264"},{codec:"webm"}],audio:[{codec:"aac"},{codec:"ogg"}]}]})}).then((function(e){return e.json()})),s.abrupt("return",r);case 7:case"end":return s.stop()}}))},D=n(13),T=n.n(D),A=function(e){var t=e.url,n=void 0===t?"":t;return r.a.createElement("video",{src:n,className:T.a.player,autoPlay:!0,width:"1920",height:"1080",controls:!0})},B=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],o=t[1],s=Object(a.useState)(!1),l=Object(c.a)(s,2),u=l[0],d=l[1];return r.a.createElement("div",{className:i.a.home},!u&&r.a.createElement(h,{onChange:function(e){localStorage.setItem("lastUrl",e),o(e),function(e){var t,n,a,r,o=arguments;return k.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t=o.length>1&&void 0!==o[1]?o[1]:15e3,console.log("Selecting profiles matching with maxBitrate=".concat(t)),s.next=4,k.a.awrap(P(e));case 4:return n=s.sent,a=n.profiles.filter((function(e){return e.bitrate<=t})),console.log("File scan",n),s.next=9,k.a.awrap(C(e,a[a.length-1].id,n.tracks.video[0].id,n.tracks.audio.map((function(e){return e.id})),[]));case 9:return r=s.sent,console.log("Session",r),s.abrupt("return",r);case 12:case"end":return s.stop()}}))}(e,1e4).then((function(e){d(e.session)}))},loading:!1!==n,value:localStorage.getItem("lastUrl")}),u&&u.stream&&"DASH"===u.stream.type&&r.a.createElement(S,{url:u.stream.url}),u&&u.stream&&"DIRECT"===u.stream.type&&r.a.createElement(A,{url:u.stream.url}))};s.a.render(r.a.createElement(B,null),document.getElementById("root"))},7:function(e,t,n){},8:function(e,t,n){e.exports={spinner:"style_spinner__3ucoZ",spinner1:"style_spinner1__3c814",spinner2:"style_spinner2__1k_LD",spinner3:"style_spinner3__3rqaT"}}},[[16,1,2]]]);
//# sourceMappingURL=main.51740713.chunk.js.map